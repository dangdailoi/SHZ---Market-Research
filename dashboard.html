<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Ph√¢n T√≠ch Chuy√™n M√¥n - Hoa VƒÉn SHZ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .gradient-text { background: linear-gradient(135deg, #22d3ee, #3b82f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  </style>
</head>
<body class="bg-slate-950">
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;
    const { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, Legend, ComposedChart, Area, Line } = Recharts;

    // Data
    const dashboardData = {
      total_centers: 69,
      total_records: 106,
      course_distribution: { "HSK c∆° b·∫£n (1-3)": 66, "HSK cao (4-6)": 18, "Thi·∫øu nhi/YCT": 9, "Giao ti·∫øp": 9 },
      teacher_distribution: { "Vi·ªát Nam": 62, "VN + B·∫£n x·ª©": 34, "B·∫£n x·ª©": 5 },
      textbook_type: { "HSK": 26, "H√°n Ng·ªØ": 18, "T·ª± bi√™n so·∫°n": 11, "YCT": 4, "Boya": 3, "Kh√°c": 27 },
      output_guarantee: { "C√≥ ƒëi·ªÅu ki·ªán": 22, "Kh√¥ng": 12, "C√≥": 12 },
      support_features: {
        "B√†i t·∫≠p v·ªÅ nh√†": { yes: 43, no: 1 },
        "Ki·ªÉm tra ƒë·ªãnh k·ª≥": { yes: 4, no: 98 },
        "App h·ªçc t·∫≠p": { yes: 4, no: 40 },
        "Ho·∫°t ƒë·ªông ngo·∫°i kh√≥a": { yes: 10, no: 34 },
        "Video b√†i gi·∫£ng": { yes: 24, no: 0 },
        "Nh√≥m h·ªó tr·ª£": { yes: 7, no: 0 }
      },
      fee_by_course: {
        "HSK c∆° b·∫£n (1-3)": { avg: 4433825, min: 2040000, max: 10420650 },
        "HSK cao (4-6)": { avg: 5715400, min: 4093000, max: 6930000 },
        "Thi·∫øu nhi/YCT": { avg: 3036500, min: 1985000, max: 4088000 },
        "Giao ti·∫øp": { avg: 2060000, min: 2060000, max: 2060000 }
      },
      skills_by_course: {
        "HSK c∆° b·∫£n (1-3)": { "Nghe": 25, "N√≥i": 25, "ƒê·ªçc": 18, "Vi·∫øt": 18, "Giao ti·∫øp": 33, "Ph√°t √¢m": 13 },
        "HSK cao (4-6)": { "Nghe": 4, "N√≥i": 5, "ƒê·ªçc": 3, "Vi·∫øt": 4, "Giao ti·∫øp": 3, "Ph√°t √¢m": 0 },
        "Giao ti·∫øp": { "Nghe": 6, "N√≥i": 6, "ƒê·ªçc": 2, "Vi·∫øt": 2, "Giao ti·∫øp": 4, "Ph√°t √¢m": 1 },
        "Thi·∫øu nhi/YCT": { "Nghe": 2, "N√≥i": 1, "ƒê·ªçc": 2, "Vi·∫øt": 2, "Giao ti·∫øp": 2, "Ph√°t √¢m": 0 }
      },
      negative_feedback: [
        { center: "ChineseHSK", issue: "Thi·∫øu quy tr√¨nh t∆∞ v·∫•n r√µ r√†ng", level: "Trung b√¨nh" },
        { center: "Newsky", issue: "T∆∞ v·∫•n thi·∫øu t·ª± tin, ch∆∞a chuy√™n nghi·ªáp", level: "Cao" },
        { center: "CGE-Hoa Ng·ªØ Qu·ªëc T·∫ø", issue: "T∆∞ v·∫•n kh√¥ng nhi·ªát t√¨nh", level: "Trung b√¨nh" },
        { center: "Hoa vƒÉn SaigonHSK", issue: "T∆∞ v·∫•n kh√¥ng chuy√™n nghi·ªáp", level: "Cao" },
        { center: "HOA NG·ªÆ ƒê·∫ÆC NH√ÇN", issue: "T∆∞ v·∫•n kh√¥ng chuy√™n nghi·ªáp", level: "Trung b√¨nh" },
        { center: "Hoa ng·ªØ phong v√¢n", issue: "T∆∞ v·∫•n kh√¥ng chuy√™n nghi·ªáp", level: "Trung b√¨nh" }
      ]
    };

    const CHART_COLORS = ['#0891b2', '#059669', '#dc2626', '#ea580c', '#7c3aed', '#0d9488'];

    function App() {
      const [activeTab, setActiveTab] = useState('overview');

      const courseDistData = Object.entries(dashboardData.course_distribution).map(([name, value]) => ({
        name: name.length > 12 ? name.substring(0, 12) + '...' : name,
        fullName: name,
        value
      }));

      // T√≠nh t·ªïng ƒë·ªông cho gi√°o vi√™n
      const totalTeachers = Object.values(dashboardData.teacher_distribution).reduce((a, b) => a + b, 0);
      const teacherDistData = Object.entries(dashboardData.teacher_distribution).map(([name, value]) => ({
        name, value, percent: ((value / totalTeachers) * 100).toFixed(0)
      }));

      const feeComparisonData = Object.entries(dashboardData.fee_by_course).map(([name, data]) => ({
        name: name.replace('(1-3)', '').replace('(4-6)', '').replace('/', '/\n').trim(),
        avg: Math.round(data.avg / 1000000 * 10) / 10,
        min: Math.round(data.min / 1000000 * 10) / 10,
        max: Math.round(data.max / 1000000 * 10) / 10
      }));

      const supportFeatureData = Object.entries(dashboardData.support_features).map(([name, data]) => ({
        name: name.length > 10 ? name.substring(0, 10) + '...' : name,
        fullName: name,
        yes: data.yes,
        no: data.no
      }));

      const getSkillsRadarData = (courseType) => {
        const skills = dashboardData.skills_by_course[courseType] || {};
        return ['Nghe', 'N√≥i', 'ƒê·ªçc', 'Vi·∫øt', 'Giao ti·∫øp', 'Ph√°t √¢m'].map(skill => ({
          skill, value: skills[skill] || 0
        }));
      };

      const guaranteeData = Object.entries(dashboardData.output_guarantee).map(([name, value]) => ({ name, value }));

      const StatCard = ({ icon, label, value, subValue, color, warning }) => (
        <div className={`bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border ${warning ? 'border-red-500/50' : 'border-slate-700/50'} hover:border-slate-600 transition-all`}>
          <div className="flex items-start justify-between">
            <div className={`p-3 rounded-xl ${color} shadow-lg`} dangerouslySetInnerHTML={{__html: icon}}></div>
            {warning && <span className="text-xs px-2 py-1 rounded-full bg-red-500/20 text-red-400">‚ö† Th·∫•p</span>}
          </div>
          <p className="text-3xl font-bold text-white mt-4">{value}</p>
          <p className="text-slate-400 text-sm mt-1">{label}</p>
          {subValue && <p className="text-slate-500 text-xs mt-1">{subValue}</p>}
        </div>
      );

      const TabButton = ({ id, label, active }) => (
        <button
          onClick={() => setActiveTab(id)}
          className={`px-5 py-3 rounded-xl font-medium transition-all text-sm ${
            active ? 'bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg' : 'bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white'
          }`}
        >
          {label}
        </button>
      );

      const CustomTooltip = ({ active, payload, label }) => {
        if (active && payload && payload.length) {
          return (
            <div className="bg-slate-900 px-4 py-3 rounded-lg shadow-2xl border border-slate-700">
              <p className="text-slate-300 text-sm font-medium mb-1">{payload[0]?.payload?.fullName || label}</p>
              {payload.map((entry, index) => (
                <p key={index} className="text-white font-bold text-sm" style={{ color: entry.color || '#fff' }}>
                  {entry.name}: {entry.value}
                </p>
              ))}
            </div>
          );
        }
        return null;
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white p-4 md:p-6">
          <div className="max-w-7xl mx-auto">
            {/* Header */}
            <div className="mb-8">
              <div className="flex items-center gap-3 mb-2">
                <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg">
                  <svg className="w-7 h-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                  </svg>
                </div>
                <div>
                  <h1 className="text-2xl md:text-3xl font-bold gradient-text">Dashboard Ph√¢n T√≠ch Chuy√™n M√¥n</h1>
                  <p className="text-slate-500 text-sm">Trung t√¢m Hoa VƒÉn SHZ ‚Ä¢ D·ªØ li·ªáu t·ª´ 69 trung t√¢m ti·∫øng Trung</p>
                </div>
              </div>
            </div>

            {/* Tabs */}
            <div className="flex flex-wrap gap-2 mb-8">
              <TabButton id="overview" label="üìä T·ªïng quan ch·∫•t l∆∞·ª£ng" active={activeTab === 'overview'} />
              <TabButton id="curriculum" label="üìö Ch∆∞∆°ng tr√¨nh h·ªçc" active={activeTab === 'curriculum'} />
              <TabButton id="value" label="üí∞ H·ªçc ph√≠ & Gi√° tr·ªã" active={activeTab === 'value'} />
              <TabButton id="risk" label="‚ö†Ô∏è T√≠n hi·ªáu r·ªßi ro" active={activeTab === 'risk'} />
            </div>

            {/* Content Tabs */}
            {activeTab === 'overview' && (
              <div className="space-y-6">
                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
                  <StatCard 
                    icon='<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>'
                    label="Trung t√¢m kh·∫£o s√°t" 
                    value="69" 
                    subValue="106 b·∫£n ghi kh√≥a h·ªçc"
                    color="bg-gradient-to-br from-cyan-500 to-blue-600"
                  />
                  <StatCard 
                    icon='<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>'
                    label="Gi√°o vi√™n Vi·ªát Nam" 
                    value="61%" 
                    subValue="62/101 b·∫£n ghi"
                    color="bg-gradient-to-br from-emerald-500 to-teal-600"
                  />
                  <StatCard 
                    icon='<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>'
                    label="Cam k·∫øt ƒë·∫ßu ra" 
                    value="74%" 
                    subValue="34/46 c√≥ cam k·∫øt"
                    color="bg-gradient-to-br from-violet-500 to-purple-600"
                  />
                  <StatCard 
                    icon='<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>'
                    label="C√≥ App h·ªó tr·ª£" 
                    value="4%" 
                    subValue="Ch·ªâ 4/106 b·∫£n ghi"
                    color="bg-gradient-to-br from-red-500 to-rose-600"
                    warning={true}
                  />
                </div>

                <div className="grid lg:grid-cols-2 gap-6">
                  <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                    <h3 className="text-lg font-bold text-white mb-1">Ph√¢n b·ªë lo·∫°i kh√≥a h·ªçc</h3>
                    <ResponsiveContainer width="100%" height={280}>
                      <PieChart>
                        <Pie data={courseDistData} cx="50%" cy="50%" innerRadius={50} outerRadius={90} paddingAngle={3} dataKey="value">
                          {courseDistData.map((entry, index) => (
                            <Cell key={`cell-${index}`} fill={CHART_COLORS[index % CHART_COLORS.length]} />
                          ))}
                        </Pie>
                        <Tooltip content={<CustomTooltip />} />
                        <Legend verticalAlign="bottom" height={50} formatter={(value) => <span className="text-slate-300 text-xs">{value}</span>} />
                      </PieChart>
                    </ResponsiveContainer>
                  </div>

                  <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                    <h3 className="text-lg font-bold text-white mb-1">Ph√¢n b·ªë lo·∫°i gi√°o vi√™n</h3>
                    <ResponsiveContainer width="100%" height={280}>
                      <BarChart data={teacherDistData} layout="vertical">
                        <CartesianGrid strokeDasharray="3 3" stroke="#334155" horizontal={false} />
                        <XAxis type="number" stroke="#94a3b8" />
                        <YAxis dataKey="name" type="category" stroke="#94a3b8" width={100} tick={{ fontSize: 12 }} />
                        <Tooltip content={<CustomTooltip />} />
                        <Bar dataKey="value" fill="#0D9488" radius={[0, 8, 8, 0]} name="S·ªë l∆∞·ª£ng" />
                      </BarChart>
                    </ResponsiveContainer>
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'risk' && (
              <div className="space-y-6">
                <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700/50">
                  <h3 className="text-lg font-bold text-white mb-4">Chi ti·∫øt feedback ti√™u c·ª±c</h3>
                  <div className="overflow-x-auto">
                    <table className="w-full text-sm">
                      <thead>
                        <tr className="border-b border-slate-700">
                          <th className="text-left py-3 px-4 text-slate-400 font-medium">Trung t√¢m</th>
                          <th className="text-left py-3 px-4 text-slate-400 font-medium">V·∫•n ƒë·ªÅ</th>
                          <th className="text-left py-3 px-4 text-slate-400 font-medium">M·ª©c ƒë·ªô</th>
                        </tr>
                      </thead>
                      <tbody>
                        {dashboardData.negative_feedback.map((item, idx) => (
                          <tr key={idx} className="border-b border-slate-700/50 hover:bg-slate-700/30">
                            <td className="py-3 px-4 text-white font-medium">{item.center}</td>
                            <td className="py-3 px-4 text-slate-300">{item.issue}</td>
                            <td className="py-3 px-4">
                              <span className={`px-2 py-1 rounded text-xs ${item.level === 'Cao' ? 'bg-red-500/20 text-red-400' : 'bg-amber-500/20 text-amber-400'}`}>
                                {item.level}
                              </span>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            )}
            
            {/* Th√™m x·ª≠ l√Ω cho c√°c Tab kh√°c t∆∞∆°ng t·ª±... */}

          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
